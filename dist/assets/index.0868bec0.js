import{_ as B,d as V,r as o,x as q,y as F,o as u,c as m,f as S,b as s,G as A,w as H,D as y,g as T,i as h,J as k,k as M,l as N,p as W,a as G}from"./index.4af51ece.js";import{r as J,v as O}from"./api.5700921d.js";import{d as R}from"./debounce.f267a6ea.js";import"./request.583deb04.js";const C=a=>(W("data-v-5c9b0cf6"),a=a(),G(),a),U={class:"main-container"},$=C(()=>s("svg",{viewBox:"0 0 1025 1024",fill:"currentColor"},[s("path",{d:"M533.204945 247.840277c-11.435995-13.314876-30.184888-13.314876-41.620883 0l-342.378861 399.573165c-11.435995 13.319992-6.434858 24.25659 11.19346 24.25659l128.001279 0c17.621155 0 31.995203 14.379165 31.995203 32.007483l0 256.048609c0 17.626271 14.378142 32.00339 32.001343 32.00339l320.002175 0c17.628318 0 31.996226-14.378142 31.996226-32.00339L704.394887 703.678539c0-17.629342 14.376095-32.007483 32.005437-32.007483l127.999232 0c17.621155 0 22.624339-10.937621 11.185273-24.25659L533.204945 247.840277z","p-id":"3191"}),s("path",{d:"M192.395911 159.573836l640.002303 0c35.375346 0 64.00064-28.633481 64.00064-64.011897 0-35.382509-28.625294-64.011897-64.00064-64.011897l-640.002303 0c-35.371252 0-63.99757 28.629387-63.99757 64.011897C128.398341 130.940356 157.023635 159.573836 192.395911 159.573836z","p-id":"3192"})],-1)),j=[$],K={class:"content-section",id:"playListsScrollTop"},Q=["onClick"],X={class:"card-detail"},Y={class:"detail-name"},Z={class:"detail-playCount"},ee=C(()=>s("svg",{viewBox:"0 0 1024 1024"},[s("path",{d:"M870.2 466.333333l-618.666667-373.28a53.333333 53.333333 0 0 0-80.866666 45.666667v746.56a53.206667 53.206667 0 0 0 80.886666 45.666667l618.666667-373.28a53.333333 53.333333 0 0 0 0-91.333334z",fill:"currentColor"})],-1)),te={key:1,class:"loading"},se={key:2,class:"loading"},le=V({setup(a){const w=o("Playlist Square"),p=o([]),x=N(),f=o();let c=o(0);const I=async()=>{let l=(await J()).sub;f.value=l.map(t=>t.name),p.value=f.value.map(t=>({title:t})),p.value.unshift({title:"\u5168\u90E8"})},i=o(null),L=o(0),d=async(e,l)=>{const t=await O(e,l);L.value=t.total,l===0?i.value=t.playlists:i.value=[...i.value,...t.playlists]};let g=o("\u5168\u90E8");const E=e=>{const l=document.querySelector("#playListsScrollTop");l&&l.scrollTo({top:0,behavior:"smooth"}),g.value=e.title,d(e.title,0),c.value=0},P=e=>{x.push({name:"PlayListDetail",params:{id:e}})};let n=o(!1);const b=()=>{const e=document.querySelector("#playListsScrollTop"),l=e.clientHeight,t=e.scrollHeight;let v=e.scrollTop;l+v>t-100&&(c.value+=60,c.value<L.value?(d(g.value,c.value),n.value=!1):n.value=!0)},D=()=>{const e=document.querySelector("#playListsScrollTop");e&&e.scrollTo({top:0,behavior:"smooth"})},_=o(!0);return q(()=>{I(),d("\u5168\u90E8",0),document.querySelector("#playListsScrollTop").addEventListener("scroll",R(b,1e3)),F(()=>{window.addEventListener("resize",()=>{_.value=!1,setTimeout(()=>{_.value=!0},100)})})}),(e,l)=>{const t=h("main-header"),v=h("LazyImg"),z=h("Waterfall");return u(),m("div",U,[S(t,{menuLink:w.value,menuItemsList:p.value,onOnClick:E},null,8,["menuLink","menuItemsList"]),s("div",{class:"goTop",onClick:D},j),s("div",K,[_.value?(u(),A(z,{key:0,lazyload:!0,class:"playlists-card",list:i.value,breakpoints:{1900:{rowPerView:5},1100:{rowPerView:4},500:{rowPerView:3}}},{item:H(({item:r})=>[s("div",{class:"playlist-card",onClick:oe=>P(r.id)},[S(v,{class:"card-img",url:r.coverImgUrl,alt:""},null,8,["url"]),s("div",X,[s("span",Y,k(r.name),1),s("span",Z,[ee,M(" "+k(r.playCount),1)])])],8,Q)]),_:1},8,["list"])):y("",!0),T(n)===!1?(u(),m("div",te," \u5DF2\u7ECF\u5728\u73A9\u547D\u52A0\u8F7D\u4E86\u3002\u3002\u3002")):y("",!0),T(n)===!0?(u(),m("div",se,"\u4E00\u70B9\u90FD\u6CA1\u6709\u54AF!!!")):y("",!0)])])}}});var re=B(le,[["__scopeId","data-v-5c9b0cf6"]]);export{re as default};
