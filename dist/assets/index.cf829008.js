import{_ as N,o as V,c as x,p as E,a as $,b as o,d as Q,u as q,r as F,e as D,f as n,w as a,g as t,h as U,i as _,n as P,j as K,k as I,l as T,E as p}from"./index.4af51ece.js";import{g as G,c as j,l as z,M as O,a as H,b as J}from"./api.5700921d.js";import"./request.583deb04.js";const W={},A=l=>(E("data-v-015144f6"),l=l(),$(),l),X={class:"beian"},Y=A(()=>o("a",{class:"beian-a",target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010902003246"},[o("span",null,"\u6D59\u516C\u7F51\u5B89\u5907 33010902003246\u53F7 ")],-1)),Z=A(()=>o("a",{class:"beian-a",target:"_blank",href:"https://beian.miit.gov.cn/#/Integrated/index"},[o("span",null," \u6D59ICP\u59072022012289\u53F7 ")],-1)),ee=[Y,Z];function oe(l,f){return V(),x("div",X,ee)}var se=N(W,[["render",oe],["__scopeId","data-v-015144f6"]]),te=(l,f,g)=>{if(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(f))return g();g(new Error("\u8BF7\u8F93\u5165\u5408\u6CD5\u624B\u673A\u53F7"))};const w=l=>(E("data-v-34ba9c51"),l=l(),$(),l),ne={class:"welcome"},ue=w(()=>o("h1",null," hello! welcome to heat waves",-1)),ae=I("\u6E38\u5BA2\u8BBF\u95EE"),le=w(()=>o("span",null,"|",-1)),re=w(()=>o("span",null,"|",-1)),ie={class:"login-form"},ce=I("Get Verification "),de={class:"login-form"},me=w(()=>o("div",{class:"login-form"},[o("div",{class:"img-box"},[o("img",{id:"codeimg",src:"",alt:""})])],-1)),pe={class:"content-button-wrapper"},_e=Q({setup(l){const f=q(),g=T();let d=F(!1),m=F("Login");const L=()=>{d.value=!0},M=i=>{d.value=i},C=async i=>{if(m.value=i,i==="QRcode"){const e=document.getElementById("codeimg"),{data:v}=await G();console.log(v.unikey);const r=await j({key:v.unikey});console.log(r.data.qrimg),e.src=r.data.qrimg}},s=D({PhoneNumber:"",verify:"",password:""}),b=F(),y=D({verify:[{required:!0,message:"Please input verify number",trigger:"blur"}],password:[{required:!0,message:"Please input Password",trigger:"blur"}],PhoneNumber:[{required:!0,message:"Please input PhoneNumber",trigger:"blur"},{validator:te,trigger:"blur"}]}),R=async()=>{(await z(s.PhoneNumber)).code===200?p.success("\u53D1\u9001\u6210\u529F!"):p.error("\u53D1\u9001\u5931\u8D25\uFF01\u8BF7\u7A0D\u540E\u518D\u8BD5(\u4E00\u5929\u53EA\u80FD\u53D1\u9001\u4E94\u6B21\u9A8C\u8BC1\u7801)")},B=async i=>{!i||await i.validate(async(e,v)=>{if(e){let r=new Date().getTime();if(m.value==="Login")if((await O(s.PhoneNumber,s.verify)).code===200){const h=await H(s.PhoneNumber,s.verify,r);h.code===200?(p.success("\u767B\u5F55\u6210\u529F!"),f.userInfoActions(h),g.push("/app")):p.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u5C1D\u8BD5")}else p.error("\u9A8C\u8BC1\u5931\u8D25,\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801");else if(m.value==="Password"){const c=await J(s.PhoneNumber,s.password,r);c.code===200?(p.success("\u767B\u5F55\u6210\u529F!"),f.userInfoActions(c),g.push("/app")):p.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u5C1D\u8BD5")}}})};return(i,e)=>{const v=_("router-link"),r=_("el-input"),c=_("el-form-item"),h=_("el-button"),k=_("el-form"),S=_("dialoge");return V(),x("div",ne,[ue,o("div",{class:"login",onClick:L},"\u767B\u5F55"),n(v,{to:"/app"},{default:a(()=>[ae]),_:1}),n(S,{flag:t(d),"slot-name":t(m),"Login-form":t(s),onOnClick:M,onKeydown:e[9]||(e[9]=U(u=>B(b.value),["enter"]))},{Title:a(()=>[o("span",{class:P(["checkout",t(m)==="Login"?"activeColor":""]),onClick:e[0]||(e[0]=u=>C("Login"))}," Login ",2),le,o("span",{class:P(["checkout",t(m)==="Password"?"activeColor":""]),onClick:e[1]||(e[1]=u=>C("Password"))},"Password",2),re,o("span",{class:P(["checkout",t(m)==="QRcode"?"activeColor":""]),onClick:e[2]||(e[2]=u=>C("QRcode"))},"QR code",2)]),Login:a(()=>[o("div",ie,[n(k,{ref_key:"ruleFormRef",ref:b,model:t(s),"status-icon":"",rules:t(y),"label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:a(()=>[n(c,{label:"Phone Number",prop:"PhoneNumber"},{default:a(()=>[n(r,{modelValue:t(s).PhoneNumber,"onUpdate:modelValue":e[3]||(e[3]=u=>t(s).PhoneNumber=u)},null,8,["modelValue"])]),_:1}),n(c,{label:"SMS Verification",prop:"verify"},{default:a(()=>[n(r,{modelValue:t(s).verify,"onUpdate:modelValue":e[4]||(e[4]=u=>t(s).verify=u)},null,8,["modelValue"]),n(h,{type:"primary",class:"Verification-button",onClick:R},{default:a(()=>[ce]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),Password:a(()=>[o("div",de,[n(k,{ref_key:"ruleFormRef",ref:b,model:t(s),rules:t(y),"status-icon":"","label-width":"120px","label-position":"top",class:"demo-ruleForm"},{default:a(()=>[n(c,{label:"Phone Number",prop:"PhoneNumber"},{default:a(()=>[n(r,{modelValue:t(s).PhoneNumber,"onUpdate:modelValue":e[5]||(e[5]=u=>t(s).PhoneNumber=u)},null,8,["modelValue"])]),_:1}),n(c,{label:"Phone Password",prop:"password"},{default:a(()=>[n(r,{modelValue:t(s).password,"onUpdate:modelValue":e[6]||(e[6]=u=>t(s).password=u),type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),QRcode:a(()=>[me]),Footer:a(()=>[o("div",pe,[o("button",{class:"content-button status-button open close",onClick:e[7]||(e[7]=u=>K(d)?d.value=!1:d=!1)},"Cancel"),o("button",{class:"content-button status-button",onClick:e[8]||(e[8]=u=>B(b.value))},"Continue")])]),_:1},8,["flag","slot-name","Login-form"]),n(se)])}}});var be=N(_e,[["__scopeId","data-v-34ba9c51"]]);export{be as default};
