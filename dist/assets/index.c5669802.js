import{_ as V,d as Y,r as w,e as y,x as T,o as d,c as i,b as a,F as x,B as D,g as k,f as B,w as E,h as W,i as S,J as m,n as v,p as H,a as X,k as J,l as K}from"./index.4af51ece.js";const O=r=>(H("data-v-c47c0d58"),r=r(),X(),r),R={class:"chat"},z={class:"userRoom"},U=O(()=>a("div",{class:"draw",id:"drawBox"},[a("canvas",{id:"canvas",style:{"border-radius":"10px"}})],-1)),j={class:"chat-box"},q={class:"chat-main"},A={class:"chat-info",id:"chartInfo"},G={class:"chat-message"},P=J("\u53D1\u9001"),Q=Y({setup(r){const $=K(),u=new WebSocket("ws://www.godsplan.top/api/talk"),p=w(),g=y([]);y([]);const _=w(),I=l=>{_.value=`${Math.floor(Math.random()*1e3)}\u53F7\u7528\u6237`},h=()=>{const l=new Date().getFullYear();let s=new Date().getMonth()+1,c=new Date().getDate(),t=new Date().getHours(),e=new Date().getMinutes(),n=new Date().getSeconds();s<10&&(s=`0${s}`),c<10&&(c=`0${c}`),t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),n<10&&(n=`0${n}`);const o=`${l}-${s}-${c} ${t}:${e}:${n}`,b=_.value,L=p.value.replace(/\r|\n/ig,"");let N=JSON.stringify({msg:L,name:b,date:o,left:!1});u.send(N),p.value="";const f=document.getElementById("chartInfo");setTimeout(()=>{f.scrollTop=f.scrollHeight},10)},C=l=>{const s=JSON.parse(l.data);if(s.name)g.push(s);else{const t=document.getElementById("canvas").getContext("2d");t&&(t.lineWidth=2,t.strokeStyle="red",t.lineTo(s.setX,s.setY),t.stroke())}},F=()=>{const l=document.getElementById("drawBox");let s=l.clientHeight,c=l.clientWidth;const t=document.getElementById("canvas");if(t){const e=t.getContext("2d");t.width=c,t.height=s;let n=!1;e&&(t.addEventListener("mousedown",o=>{n=!0,e.moveTo(o.pageX-50,o.pageY-108)}),t.addEventListener("mousemove",o=>{n&&(e.lineWidth=2,e.strokeStyle="red",e.lineTo(o.pageX-50,o.pageY-108),u.send(JSON.stringify({setX:o.pageX-50,setY:o.pageY-108,palyer:1})),e.stroke())}),t.addEventListener("mouseup",o=>{n=!1}))}},M=()=>{$.push("/apps/games")};return T(()=>{u.addEventListener("message",C,!1),u.addEventListener("open",I,!1),F()}),(l,s)=>{const c=S("el-button"),t=S("el-input");return d(),i("div",R,[a("div",{class:"back",onClick:M},"\u8FD4\u56DE"),a("div",z,[(d(!0),i(x,null,D(k(g),(e,n)=>(d(),i("div",{key:n},m(e.set),1))),128))]),U,a("div",j,[a("div",q,[a("div",A,[(d(!0),i(x,null,D(k(g),(e,n)=>(d(),i("div",{class:"info-detail",key:n},[a("div",{class:v(e.left?"head":"head-a")},[a("span",{class:v(["name",e.name==="\u7CFB\u7EDF"?"systemName":""])},m(e.name),3),a("span",null,m(e.date),1)],2),a("div",{class:v(e.left?"info-main":"info-main-a")},[a("span",null,m(e.msg),1)],2)]))),128))]),a("div",G,[B(t,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea",rows:"6",onKeyup:W(h,["enter","native"])},{default:E(()=>[B(c,{slot:"append",type:"primary",onClick:h},{default:E(()=>[P]),_:1})]),_:1},8,["modelValue","onKeyup"])])])])])}}});var ee=V(Q,[["__scopeId","data-v-c47c0d58"]]);export{ee as default};
